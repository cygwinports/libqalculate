--- origsrc/libqalculate-0.9.6/configure.in	2007-05-18 03:08:26.000000000 -0500
+++ src/libqalculate-0.9.6/configure.in	2008-02-04 21:25:21.062500000 -0600
@@ -91,7 +91,7 @@
 
 AC_LANG([C++])
 
-AC_PATH_CLN(1.1.0, [
+PKG_CHECK_MODULES(CLN, cln >= 1.1.0, [
      	LIBS="$LIBS $CLN_LIBS"
      	CPPFLAGS="$CPPFLAGS $CLN_CPPFLAGS"
   	AC_DEFINE(HAVE_LIBCLN,1,[If CLN can be used])
@@ -114,7 +114,7 @@
 USE_READLINE="yes"
 READLINE_LIBS=""
 if test "x$enable_textport" = "xyes" ; then
-  QALCULATE_TEXT="qalc"
+  QALCULATE_TEXT="qalc\$(EXEEXT)"
   LN_QALCULATE="qalc"
 
   AC_MSG_CHECKING([whether to use readline])
@@ -199,7 +199,7 @@
 
 QALCULATE_DEFS2DOC=""
 if test "x$enable_defs2doc" = "xyes" ; then
-	QALCULATE_DEFS2DOC="defs2doc"
+	QALCULATE_DEFS2DOC="defs2doc\$(EXEEXT)"
 fi
 AC_SUBST(QALCULATE_DEFS2DOC)
 
--- origsrc/libqalculate-0.9.6/docs/reference/Makefile.am	2006-06-01 15:14:19.000000000 -0500
+++ src/libqalculate-0.9.6/docs/reference/Makefile.am	2008-02-04 21:22:55.078125000 -0600
@@ -3,7 +3,7 @@
 #
 
 referencedir = $(datadir)/doc/$(PACKAGE)-$(VERSION)/reference/html
-reference_DATA = html/*.png html/*.html html/*.css
+reference_DATA = $(srcdir)/html/*.png $(srcdir)/html/*.html $(srcdir)/html/*.css
 
 EXTRA_DIST = html/*.png html/*.html html/*.css
 
--- origsrc/libqalculate-0.9.6/libqalculate/Calculator.cc	2007-05-18 03:08:59.000000000 -0500
+++ src/libqalculate-0.9.6/libqalculate/Calculator.cc	2008-02-04 21:22:55.078125000 -0600
@@ -33,7 +33,7 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <dirent.h>
-#include <wait.h>
+#include <sys/wait.h>
 #include <queue>
 #include <glib.h>
 //#include <dlfcn.h>
@@ -295,8 +295,13 @@
 
 	saved_locale = strdup(setlocale(LC_NUMERIC, NULL));
 	struct lconv *lc = localeconv();
+#ifdef __CYGWIN__
+	place_currency_code_before = lc->p_cs_precedes;
+	place_currency_code_before_negative = lc->n_cs_precedes;
+#else
 	place_currency_code_before = lc->int_p_cs_precedes;
 	place_currency_code_before_negative = lc->int_n_cs_precedes;
+#endif
 	place_currency_sign_before = lc->p_cs_precedes;
 	place_currency_sign_before_negative = lc->n_cs_precedes;
 	default_dot_as_separator = strcmp(lc->thousands_sep, ".") == 0;
--- origsrc/libqalculate-0.9.6/libqalculate/Makefile.am	2006-05-18 08:37:43.000000000 -0500
+++ src/libqalculate-0.9.6/libqalculate/Makefile.am	2008-02-04 21:22:55.093750000 -0600
@@ -24,7 +24,7 @@
 	@GLIB_LIBS@
 
 INCLUDES = \
-	-I../ \
+	-I$(top_srcdir) \
 	-DPACKAGE_DATA_DIR=\""$(datadir)"\" \
 	-DPACKAGE_LOCALE_DIR=\""$(prefix)/$(DATADIRNAME)/locale"\" \
 	@GLIB_CFLAGS@
--- origsrc/libqalculate-0.9.6/src/Makefile.am	2005-10-04 18:13:10.000000000 -0500
+++ src/libqalculate-0.9.6/src/Makefile.am	2008-02-04 21:22:55.093750000 -0600
@@ -5,7 +5,8 @@
 INCLUDES = \
 	-DPACKAGE_DATA_DIR=\""$(datadir)"\" \
 	-DPACKAGE_LOCALE_DIR=\""$(prefix)/$(DATADIRNAME)/locale"\" \
-	-I../libqalculate \
+	-I$(top_srcdir) \
+	-I$(top_srcdir)/libqalculate \
 	@GLIB_CFLAGS@
 
 bin_PROGRAMS = @QALCULATE_TEXT@
--- origsrc/libqalculate-0.9.6/src/qalc.cc	2007-05-18 03:34:44.000000000 -0500
+++ src/libqalculate-0.9.6/src/qalc.cc	2008-02-04 21:22:55.781250000 -0600
@@ -18,6 +18,7 @@
 #include <dirent.h>
 #include <malloc.h>
 #include <stdio.h>
+#include <sys/select.h>
 #include <vector>
 #include <glib.h>
 #ifdef HAVE_LIBREADLINE
